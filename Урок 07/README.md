## **Коллекция ДЗ Урок 7.** Условия и циклы

#### Задание 30.

**USERS**, метод _**getUserFull**_. Для указанного пользователя проверить в ответе сервера наличие полей _**companys**_ и _**tasks**_, а также правильность их типов. Если указанные поля в ответе существуют, проверить у их **первых** элементов наличие полей _**name**_ и _**id_company**_ и _**name**_ и _**id_task**_ соответственно, а также правильность их типов.

В случае отсутствия в ответе сервера полей _**companys**_ и _**tasks**_, проверить ответ сервера на наличие сообщения о том, что запрошенный пользователь не найден.

##### Запрос задания:

- **POST ДЗ 30 USER getUserFull Есть ли в ответе компании и задачи**
    

#### Задание 31.

**DADATA**, поиск по фамилии. Отправить ресурсу **DADATA** запрос, тело которого имеет вид:

``` json
{
  "query": "А",
  "gender": "MALE",
  "parts": ["NAME"]
}

 ```

Написать автотесты, проверяющие, что:

1. В ответе сервера только мужчины.
2. В ответе сервера только имена.
    

Перебор элементов ответа сервера реализовать в двух вариантах: циклом _**for**_ и методом массива _**forEach()**_.

##### Запрос задания:

- **POST ДЗ 31 DADATA Поиск по фамилии В ответе только имена**
    

#### Задание 32.

**DADATA**, поиск по фамилии. Отправить ресурсу **DADATA** запрос, тело которого имеет вид:

``` json
{
  "query": "Ан"
}

 ```

Написать автотест, проверяющий, что среди релевантных элементов ответа сервера существует элемент, содержащий имя **Анна**.

##### Запросы задания:

- **POST ДЗ 32 DADATA Поиск по фамилии В ответе есть имя Анна**
    

#### Задание 33.

**USERS**, метод _**updateUserOneField**_. Методом _**sendRequest()**_ объекта **pm** создать пользователя с рандомными _**name**_ и _**email**_. Методом _**updateUserOneField**_ обновить у этого пользователя поле _**hobby**_. Написать автотест, проверяющий, что это поле действительно обновилось и именно тем значением, которое было указано при создании пользователя.

##### Запросы задания:

- **POST ДЗ 33 USER updateUserOneField Изменяем выбранное поле пользователя sendRequest**
    

##### Примечание:

Для удобства использования, а также для будущих ДЗ, где такой подход необходим, стандартный метод _**sendRequest()**_ объекта **pm** был "обернут" в **Promise**.

#### Задание 34.

**USERS**, метод _**getUserFull**_. Методом _**sendRequest()**_ объекта **pm** создать компанию, аналогичным методом создать пользователя и привязать его к созданной на предыдущем этапе компании. Выполнить на ресурсе **USERS** метод _**getUserFull**_ для созданного ранее пользователя и убедиться, что пользователь связан с только что созданной компанией.

##### Запросы задания:

- **POST ДЗ 34 USER getUserFull Тестируем соответствие компании в ответе sendRequest**
    

##### Примечание:

Поскольку _**pm.sendRequest()**_ выполняется ассинхронно, а нам необходимо организовать цепочку _**sendRequest()**_ с последовательной передачей данных между ними, стандартный метод _**sendRequest()**_ объекта **pm** был "обернут" в **Promise**.

#### Задание 35.

**USERS**, метод _**magicSearch**_. Методом _**magicSearch**_ произвести на ресурсе **USERS** поиск указанного пользователя. Написать автотесты, проверяющие корректность возвращенных для него _**name**_, _**email**_, _**phone**_ и _**birthday**_. Необходимо учесть, что запрос может быть выполнен в двух окружениях: _**тестовом**_ и _**рабочем**_. В _**тестовом**_ окружении мы _**можем создать**_ необходимого нам пользователя, если его там в данный момент нет; в _**рабочем**_ окружении создавать необходимого нам пользователя _**нельзя**_.

##### Примечание:

Текущее окружение указывается в переменной коллекции _**magicSearchEnvURL**_

##### Запрос задания:

- **POST ДЗ 35 USER magicSearch Поиск пользователя с учетом окружения SendRequest**
    

##### Примечание:

1. Запрос **ДЗ 35-1 USER addAvatar Добавить аватар из файла пользователю** не является частью домашнего задания и выполнен по собственной инициативе. Данный запрос загружает изображение аватара для пользователя, созданного в **ДЗ 35**.
2. Запросы к ресурсу **DADATA** требуют авторизации. Параметры авторизации хранятся и заполняются в глобальных переменных **DADATA_AUTH_KEY** и **DADATA_AUTH_VALUE**, метод авторизации в запросах - **API Key**.